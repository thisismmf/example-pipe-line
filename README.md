```markdown
# ูุณุชูุฏ ุงุฌุฑุง ูพุงูพโูุงู `KafkaยโยLogstashยโยElasticsearchยโยKibana`

---

## ููุฑุณุช ูุทุงูุจ
1. [ูุนุฑู ูพุฑูฺู](#ูุนุฑู-ูพุฑูฺู)  
2. [ุณุงุฎุชุงุฑ ุฏุงุฑฺฉุชูุฑโูุง](#ุณุงุฎุชุงุฑ-ุฏุงุฑฺฉุชูุฑูุง)  
3. [ุฌุฒุฆุงุช ุณุฑูุณโูุง](#ุฌุฒุฆุงุช-ุณุฑูุณูุง)  
4. [ูุฑุงุญู ุงุฌุฑุง ูพุงูพโูุงู](#ูุฑุงุญู-ุงุฌุฑุง-ูพุงูพโูุงู)  
5. [ฺุงูุดโูุง ู ุฑูุน ุจุงฺฏโูุง](#ฺุงูุดูุง-ู-ุฑูุน-ุจุงฺฏูุง)  
6. [ุจูุจูุฏูุง ุขูุฏู](#ุจูุจูุฏูุง-ุขูุฏู)

---

## ูุนุฑู ูพุฑูฺู
ูุฏู ุงู ุจูุฏ ฺฉู ุฏุงุฏูู ุฎุงู (JSONยูุงููุธู) ุจุง ฺฉ ุงุณฺฉุฑูพุช Python ุจู `Kafka` ุงุฑุณุงู ุดูุฏุ ุชูุณุท `Logstash` ูพุงฺฉโุณุงุฒ ู ูุฑูุงู ฺฏุฑุฏุฏ ู ุฏุฑ ููุงุช ุฏุฑ ุงูุฏฺฉุณ ุจู ูุงู `test_pipeline` ุฏุงุฎู `Elasticsearch` ุฐุฎุฑู ุดูุฏุ ุณูพุณ ุฏุงุฏู ุฏุฑ `Kibana` ูุงุจู ูุดุงูุฏู ู ุชุญูู ุจุงุดุฏ.

---

## ุณุงุฎุชุงุฑ ุฏุงุฑฺฉุชูุฑโูุง<a id="ุณุงุฎุชุงุฑ-ุฏุงุฑฺฉุชูุฑูุง"></a>

```
.
โโโ data/
โ   โโโ sample.json
โโโ docker-compose.yml
โโโ logstash/
โ   โโโ pipeline/
โ       โโโ logstash.conf
โโโ python_producer/
โ   โโโ requirements.txt
โ   โโโ Dockerfile.producer
โ   โโโ producer.py
โโโ README.md   โ ููู ูุงู
```

---

## ุฌุฒุฆุงุช ุณุฑูุณโูุง<a id="ุฌุฒุฆุงุช-ุณุฑูุณูุง"></a>

### 1. Producer (Python)

| ูุงู | ุชูุถุญ |
|------|-------|
| `producer.py` | ุฑฺฉูุฑุฏูุง `sample.json` ุฑุง ุฎูุงูุฏู ู ุฏุฑ ุชุงูพฺฉ `test_pipeline` ููุชุดุฑ ูโฺฉูุฏ.  |
| `Dockerfile.producer` | ุจุฑ ูพุงูู โุงูุฌ `python:3.9-slim` ูพฺฉุฌโูุง ููุฑุฏูุงุฒ (`kafka-python`) ุฑุง ูุตุจ ูโฺฉูุฏ. |
| Volumeโูุง | ุฏุงุฑฺฉุชูุฑ ฺฉุฏ ู ูุงู JSON ุฏุฑ ูุณุฑ `/app` ฺฉุงูุชูุฑ ูููุช ูโุดููุฏ. |

### 2. Kafka & Zookeeper
ุงุฒ ุงูุฌโูุง ุฑุณู Confluent (`cp-kafka:7.0.1`, `cp-zookeeper:7.0.1`) ุงุณุชูุงุฏู ุดุฏู.  
ูฺฉุชูู ฺฉูุฏ: ููุฏุงุฑุฏู ูุชุบุฑ `KAFKA_ADVERTISED_LISTENERS` ุจุง `PLAINTEXT://kafka:9092` ุจุฑุง ุฏุณุชุฑุณ ุณุงุฑ ุณุฑูุณโูุง ุฏุงฺฉุฑ.

### 3. Logstash
`logstash.conf` ุดุงูู:

```conf
input { kafka { topics => ["test_pipeline"] codec => "json" ... } }

filter {
  mutate { rename => { "full_name" => "name" } remove_field => ["extra_field"] }
  mutate { convert => { "id" => "integer" } }
  mutate { gsub => ["timestamp","/","-"] }
  date   { match => ["timestamp","yyyy-MM-dd HH:mm:ss","ISO8601"] timezone => "UTC" }
  mutate { convert => { "active" => "boolean" } }
  ruby   { code => "event.get('name').strip!; event.set('name', nil) if event.get('name').empty?" }
}

output { elasticsearch { index => "test_pipeline" } stdout { codec => rubydebug } }
```

### 4. Elasticsearch
ุงูุฌ `elasticsearch:7.17.9` ุฏุฑ ุญุงูุช ุชฺฉโููุฏ (`single-node`) ู ุญุงูุธู ตฑฒยMB.

### 5. Kibana
ุงูุฌ ูุชูุงุธุฑ `kibana:7.17.9`ุ ูุชุบุฑ `ELASTICSEARCH_HOSTS` ุฑู `http://elasticsearch:9200`.

---

## ูุฑุงุญู ุงุฌุฑุง ูพุงูพโูุงู<a id="ูุฑุงุญู-ุงุฌุฑุง-ูพุงูพ-ูุงู"></a>

```bash
# ุณุงุฎุช ู ุจุงูุง ุขูุฑุฏู ุชูุงู ุณุฑูุณโูุง
docker-compose up --build

# ุฏุฑ ุชุฑููุงู ุฏฺฏุฑุ ุฏุฑ ุตูุฑุช ูุงุฒ producer ุฑุง ูุฌุฏุฏุงู ุงุฌุฑุง ฺฉู
docker-compose run --rm producer
```

1. ูพุณ ุงุฒ ุจุงูุง ุขูุฏูุ ุฏุฑ ูุฑูุฑฺฏุฑ ุจู `http://localhost:5601` ุจุฑู.  
2. ฺฏุฒููู **Explore on my own** ุฑุง ุจุฒู.  
3. ุฏุฑ **Discover**ุ ฺฉ Index Pattern ุจุง ูุงู `test_pipeline*` ุจุณุงุฒ ู ููุฏ ุฒูุงู ุฑุง `timestamp` ุงูุชุฎุงุจ ฺฉู.  
4. ุจุงุฒูู ุฒูุงู (Date Picker) ุฑุง ุงุฒ **Lastย15ยminutes** ุจู ูุซูุง **Lastย90ยdays** ุง ุฑูุฌ ุฏุณุช ุดุงูู ุชุงุฑุฎ ุฏุงุฏูโูุง ุชุบุฑ ุจุฏู.  
5. ุงุณูุงุฏ ุชูุฒ ุดุฏู ุฑุง ูโุจูุ ุงุณฺฉุฑูโุดุงุช ุจฺฏุฑ ู ุฏุฑ ูุฎุฒู ุฐุฎุฑู ฺฉู.

---

## ฺุงูุดโูุง ู ุฑูุน ุจุงฺฏโูุง<a id="ฺุงูุดูุง-ู-ุฑูุน-ุจุงฺฏูุง"></a>

| ฺุงูุด | ุดุฑุญ | ุฑุงูฺฉุงุฑ |
|------|-----|--------|
| **ูุฏุงุดุชู `Dockerfile.producer`** | ุงุฑูุฑ *failed to read dockerfile* ุฏุฑ build ุงููู. | ูุงู `Dockerfile.producer` ุฑุง ุงุถุงูู ู ูุณุฑ ุขู ุฑุง ุฏุฑ `docker-compose.yml` ูุดุฎุต ฺฉุฑุฏู. |
| **Index ุฏุฏู ููโุดุฏ** | Kibana ูพุบุงู *Name must match one or more indices* ูโุฏุงุฏ. | ุจุง `curl localhost:9200/_cat/indices` ูููุฏู ุงูุฏฺฉุณ ุงุฌุงุฏ ูุดุฏูุ Producer ุฑุง ุจุนุฏ ุงุฒ ุขูุงุฏูโุดุฏู Kafka ู Logstash ุฏูุจุงุฑู ุงุฌุฑุง ฺฉุฑุฏู. |
| **Discover ุฎุงู ุจูุฏ** | ูพุงู *No results match your search criteria* ุฏุฏู ูโุดุฏ. | Date Picker ุจู ฑต ุฏููู ุงุฎุฑ ูุญุฏูุฏ ุจูุฏุ ุจุงุฒูู ุฒูุงู ุฑุง ฺฏุณุชุฑุด ุฏุงุฏู. |
| **ุนุฏูู mount ุดุฏู `sample.json`** | Producer ููโุชูุงูุณุช ูุงู ุฑุง ูพุฏุง ฺฉูุฏ. | volume `./data:/app/data:ro` ุฑุง ุงุถุงูู ู ุจุง `ls` ุฏุงุฎู ฺฉุงูุชูุฑ ฺฉูุชุฑู ฺฉุฑุฏู. |
| **Producer ุฒูุฏุชุฑ ุงุฒ Kafka ุงุฌุฑุง ุดุฏ** | ูพุงูโูุง drop ุดุฏูุฏ. | `depends_on` ฺฉุงู ูุจูุฏุ producer ุฑุง ุฏุณุช ุจุง `docker-compose run --rm producer` ุงุฌุฑุง ฺฉุฑุฏู. |
| **ุฎุทุง Date Parse** | ูุฑูุช `2025/01/31 12:34:56` ุชูุณุท ููุชุฑ `date` ูพุงุฑุณ ููโุดุฏ. | ูุจู ุงุฒ ุขู ุจุง `gsub` ุงุณูุดโูุง ุฑุง ุจู ุฏุด ุชุจุฏู ฺฉุฑุฏู ู ุงูฺฏู `yyyy-MM-dd HH:mm:ss` ุฑุง ุงุถุงูู ูููุฏู. |
| **ุฎุงูโูุงูุฏู ููุฏ `name`** | ููุฏุงุฑ ููุท whitespace ุจูุฏ. | ุจุง Ruby filter ูุถุง ุฎุงู ุฑุง trim ู ุงฺฏุฑ ุฎุงู ูุงูุฏ ุจู `null` ุชุจุฏู ฺฉุฑุฏู. |

---

## ุจูุจูุฏูุง ุขูุฏู<a id="ุจูุจูุฏูุง-ุขูุฏู"></a>

* ุชุนุฑู **Index Template** ุจุฑุง ููุนโุฏู ุฏูู ููุฏูุง ูุจู ุงุฒ ingest.  
* ุงุถุงููโฺฉุฑุฏู `Filebeat` ุฌูุช ุฎูุงูุฏู ูุงูโูุงฺฏโูุง ูุงูุน.  
* ุณุงุฎุช ุฏุงุดุจูุฑุฏูุง ุขูุงุฏู ุฏุฑ Kibana ุจุฑุง ูุงูุชูุฑูฺฏ ุจูุชุฑ.

---

> **ูพุงุงู** โ ุงฺฏุฑ ูพุดููุงุฏ ุง ุณูุงู ุฏุงุฑุฏ ุจุง ฺฉูุงู ูู ูโุดููู ๐ค
```